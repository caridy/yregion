YRegion2=window.YRegion2||function(){var Q={},F={},G={},E={},V=[],J=/(?:^|\s+)(target|hook)([\w-\.]+)(?:\s+|$)/,U=/^\s+|\s+$/g,I={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},P=[],a=null,S=[],K=null,X=null,W="region:ready",H="contentchange",d="element",h="region",R="yregion";function D(j){var c;for(c=0;c<j.length;c++){V.push({fullpath:j[c]});}}function b(j){var c;j=j||{};if(j.verifier&&j.verifier.call()){return true;}else{for(c=0;c<V.length;c++){if(V[c].fullpath==j.fullpath){return true;}}}return false;}function N(j){var c=S.pop();A();if(j&&c){c.callback.call();}}function A(){if(S.length>0){YAHOO.log("[YRegion2] [Loader Queue] loading: "+S[0].require.join(),"info",S[0].require);a.require(S[0].require);a.insert({onSuccess:function(){YAHOO.log("[YRegion2] [Loader Queue] success","info");N(true);},onFailure:function(){YAHOO.log("[YRegion2] [Loader Queue] failure","error");N();},onTimeout:function(){YAHOO.log("[YRegion2] [Loader Queue] timeout","error");N();}},S[0].type);}}function M(c){var i={event:c,flagged:false};i.element=YAHOO.util.Event.getTarget(c)||document.body;i.target=new YAHOO.util.Element(i.element);i.stopEvent=function(){i.flagged=true;YAHOO.util.Event.stopEvent(c);};return i;}function C(c){c=c||{};var i=M(c);if(i.event&&i.target){i.trigger=Q.getOwnerByClassName(i.target,"trigger",5);i.anchor=Q.getOwnerByTagName(i.target,"A",5);if(!i.yuibutton&&!i.anchor){if((i.target.get("tagName")=="INPUT")&&(i.input=i.target)){}else{if((i.target.get("tagName")=="BUTTON")&&(i.button=i.target)){}else{i.select=Q.getOwnerByTagName(i.target,"SELECT",2);if(i.select){i.value=i.select.get(d)[i.select.get(d).selectedIndex].value;}}}}if((i.anchor||i.button)&&(i.yuibutton=Q.getYUIButton(i.target))){i.value=i.yuibutton.get("value");i.classes=i.yuibutton.get("className");}i.trigger=i.trigger||i.anchor||i.yuibutton||i.input||i.select||i.target;if(i.trigger){i.value=i.value||i.trigger.get("value");i.classes=i.classes||i.trigger.get("className");}}return i;}function O(j){var i,c=[];while((i=J.exec(j))){c.push(i[2].toLowerCase());j=j.replace(i[1]+i[2],"");}return c;}function Z(c,i){i=i||{};i.guid=c;i.lazyload=false;if(i.ondomready){i.ondomready=false;YAHOO.util.Event.onDOMReady(function(j){YAHOO.log("[YRegion2] init region on DOMReady "+c,"info");Q.initRegion(c,i);});}else{if(X){i.parentRegion=i.parentRegion||X;i.parent=i.parent||X.guid;}if(i.guid&&i.ns&&!G.hasOwnProperty(i.guid)){if(F.hasOwnProperty(i.ns)){F[i.ns].subscribe(i);}else{F[i.ns]=new B(i.ns);F[i.ns].subscribe(i);if(i.region){F[i.ns].load(i.region);}else{F[i.ns].set({});}}}}}function Y(c){X.initPlugin(c);}function e(k,j){var l,i;if(j&&k.childs){i=j.get(d);for(l in k.childs){if(k.childs.hasOwnProperty(l)&&k.childs[l].guid&&(!k.childs[l].lazyload)){if((i===k.childs[l].container)||YAHOO.util.Selector.test(i,"#"+k.childs[l].guid+" *")){return e(k.childs[l],j);}}}}return k;}function g(p,k){var n=I,c=n.parser[k?"strict":"loose"].exec(p),l={},j=14;while(j--){l[n.key[j]]=c[j]||"";}l[n.q.name]={};l[n.key[12]].replace(n.q.parser,function(m,i,o){if(i){l[n.q.name][i]=o;}});return l;}function L(){return{Lang:YAHOO.lang,Event:YAHOO.util.Event,Dom:YAHOO.util.Dom};}var B=function(c){this.ns=c;};B.prototype={load:function(c,i){i=i||{};YAHOO.log("In debug mode, all regions definitions will get a timestamp to avoid caching: "+(this._debug?(c+=((c.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString()):c),"warn");return YAHOO.util.Get.script(c,i);},set:function(c){YAHOO.lang.augmentObject(c,K);this._mod=c;this.notify();},create:function(c){c.actions=c.actions||{};YAHOO.lang.augmentObject(c.actions,(this._mod.actions||{}));YAHOO.lang.augmentObject(c,this._mod);G[c.guid]=c;c.init();},subscribe:function(c){this._instances=this._instances||[];this._instances.push(c);if(this._mod){this.notify();}},notify:function(){var c;if(YAHOO.lang.isArray(this._instances)){while((c=this._instances.pop())){this.create(c);}}}};K={init:function(){YAHOO.log("[YRegion2] creating: "+this.guid,"info");var o,j,n=[],m,c,k=this;this.getargs=(this.getargs?this.getargs:{});this.postargs=(this.postargs?this.postargs:{});m=Array.prototype.slice.call((this.require||[]),0);m.push("event","dom","element","selector","connection");this.dependencies=this.dependencies||[];for(j=0;j<this.dependencies.length;j++){o=this.dependencies[j];if(typeof o==="string"){o={fullpath:o};this.dependencies[j]=o;}if(o.fullpath&&(!b(o))){YAHOO.log("In debug mode, all dependencies will get a timestamp to avoid caching: "+(this._debug?(o.fullpath+=((o.fullpath.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString()):o.fullpath),"warn");n.push(o.fullpath);}}YAHOO.log("[YRegion2] loading the requirements for region "+this.guid+": "+m.join(),"info");o=function(){var i=this;k.container=i;YAHOO.log("[YRegion2] the DOM element for the region is ready: "+k.guid,"info");if(k.wrapper){YAHOO.log("[YRegion2] creating the container for the area: "+k.guid,"info");this.addToBody({attributes:{id:k.guid}},i);k.container=YAHOO.util.Selector.query("#"+k.guid,i,true);}if(k.ajax){YAHOO.log("[YRegion2] init an AJAX region");YAHOO.lang.augmentObject(k,L());k.execute("render",{},function(l){k.container.innerHTML=l.response;k.ready();});}else{k.ready();}};c=this._loader=this._loader||{};c.combine=(c.hasOwnProperty("combine")?c.combine:true);c.combine=!this._debug;c.filter=c.filter||"min";c.filter=(this._debug?"debug":c.filter);a=a||new YAHOO.util.YUILoader(c);this.include(m,n,function(){k.onAvailable(o);});return this;},onAvailable:function(j){var k=this.wrapper||this.guid,i;
YAHOO.log("[YRegion2] the dependencies are ready, now we need to wait for the DOM element: "+this.guid,"info");if(YAHOO.util.Dom.inDocument(k)&&(i=YAHOO.util.Dom.get(k))){YAHOO.log("[YRegion2] [onAvailable] the element is already in the DOM: "+this.guid,"info");j.apply(i,[]);}else{YAHOO.log("[YRegion2] [onAvailable] Using YUI Event onAvailable to wait for the element"+this.guid,"info");YAHOO.util.Event.onAvailable(k,j);}return this;},ready:function(){var l,j,k=this;if(this.guid==R){this.container=document.body;this.container.id=this.guid;}YAHOO.lang.augmentObject(this,L());this.install(this.actions);if(YAHOO.lang.isArray(this.plugins)){for(j=0;j<this.plugins.length;j++){this.initPlugin(this.plugins[j]);}}if(this.parentRegion){this.parentRegion.setChild(this);}this.node=new YAHOO.util.Element(this.container);this.node.addClass(h);if(this.childs){for(l in this.childs){if(this.childs.hasOwnProperty(l)&&(!this.childs[l].lazyload)){this.initChild(l,this.childs[l]);}}}this.fire(W);YAHOO.util.Event.onContentReady(this.guid,function(){YAHOO.log("[YRegion2] region is ready to be expanded: "+k.guid,"info");k.fire("region:contentready");k.bubbling("test","ready",{region:k,ns:k.ns});});return this;},install:function(i){var c;if(i){for(c in i){if(i.hasOwnProperty(c)){this.on(c,i[c]);YAHOO.log("[YRegion2] adding a new message for region "+this.guid+": "+c,"info");}}}return this;},initPlugin:function(c){YAHOO.log("[YRegion2] Adopting a new plugin ("+c+"): "+(E.hasOwnProperty(c)?"success":"failure"),"info");if(E.hasOwnProperty(c)){this.install(E[c]);}return this;},use:function(){var c=Array.prototype.slice.call(arguments,0),i=c.pop();if(i){if(c&&c.length>0){S.push({require:c,callback:i,type:"js"});if(S.length==1){A();}}else{i.call();}}return this;},include:function(j,i,l){var k=Array.prototype.slice.call(i,0),c=this;if(l){j.push(function(m){YAHOO.log("[YRegion2] the requirements are ready, now we need to load the dependencies: "+k.join(),"info");if(YAHOO.lang.isArray(k)&&(k.length>0)){YAHOO.util.Get.script(k,{onSuccess:function(n){D(i);n.purge();l.apply(c,[]);},onFailure:{}});}else{l.apply(c,[]);}});this.use.apply(c,j);}return this;},setContent:function(c,l){var k=YAHOO.util.Selector.query(c,this.container,true);YAHOO.log("[YRegion2] SetContent thru xpath  ("+c+"): "+(k?"success":"failure"),"info");if(k){for(var j=0;j<k.childNodes.length;j++){this.Event.purgeElement(k.childNodes[j],true);}k.innerHTML=l;this.bubbling(h,H,{node:this.node});}return this;},setBody:function(k){var j=this.container,c;if(j&&this.Dom.inDocument(j)){for(c=0;c<j.childNodes.length;c++){this.Event.purgeElement(j.childNodes[c],true);}this.node.set("innerHTML",k);this.bubbling(h,H,{node:this.node});}return this;},addToBody:function(i,k){var j,c;if(this.Lang.isString(i)){i={innerHTML:i};}k=k||this.node;this.Lang.augmentObject(i,{type:"div",attributes:{},innerHTML:""});if(i){j=document.createElement(i.type);for(c in i.attributes){if(i.attributes.hasOwnProperty(c)){j.setAttribute(c,i.attributes[c]);}}j.innerHTML=i.innerHTML;k.appendChild(j);this.bubbling(h,H,{node:this.node});}return this;},initChild:function(c,i){i=i||{};i.parentRegion=this;i.parent=this.guid;Q.initRegion(c,i);return this;},wakeChild:function(c){if(c&&this.childs.hasOwnProperty(c)&&this.childs[c].lazyload){this.initChild(c,this.childs[c]);}return this;},setChild:function(c){this.childs=this.childs||{};if(c&&c.guid){this.childs[c.guid]=c;}return this;},getChild:function(c){return((this.childs&&this.childs.hasOwnProperty(c))?this.child[c]:null);},get:function(c,j){j=j||this.node;var i=YAHOO.util.Selector.query(c,j.get(d),true);return(i?new YAHOO.util.Element(i):null);},getViewport:function(){var c=this.container,i=this.Dom.getRegion(c)||null;if(i){i.width=i.right-i.left;i.height=i.bottom-i.top;i.scrollWidth=parseInt(c.scrollWidth,10);i.scrollHeight=parseInt(c.scrollHeight,10);i.position=this.Dom.getStyle("position")||"";i.overflow=this.Dom.getStyle("overflow")||"";}return i;},setViewport:function(j){var i=this.Dom.setStyle,c;j=j||{};for(c in j){if(j.hasOwnProperty(c)){i(c,j[c]);}}return this;},on:function(i,j,c){this.listeners=this.listeners||{};if(!this.listeners.hasOwnProperty(i)){this.listeners[i]=new YAHOO.util.CustomEvent(i,this);}this.listeners[i].subscribe(j,c);return this;},fire:function(c,i){i=i||{};if(this.listeners&&this.listeners.hasOwnProperty(c)){this.listeners[c].fire(i);}return i.flagged;},signature:function(i){var c=(i[1]?i[1][0]:null);return((c&&c.flagged)?null:{layer:i[0],args:c,obj:i[2]});},inject:Q.inject,notify:Q.notify,bubbling:function(k,l,m,c){m=m||{};m.layer=k;l=(this.Lang.isArray(l)?l:[l]);if(!c){for(var j=0;j<l.length;j++){this.fire(k+":"+l[j],m);}}if(this.parentRegion&&!m.flagged){this.parentRegion.bubbling(k,l,m);}return m.flagged;},broadcast:function(j,l,k,i){var m;k=k||{};k.layer=j;k.flagged=false;if(!i){this.fire(j+":"+l,k);YAHOO.log("[YRegion2] new broadcast message for region"+this.guid+": ["+j+":"+l+"]","info");}if(this.childs){for(m in this.childs){if(this.childs.hasOwnProperty(m)&&(!this.childs[m].lazyload)){k.flagged=false;this.childs[m].broadcast(j,l,k);}}}return k.flagged;},execute:function(k,n,r){var p="",q,i="/ajax/"+this.ns+"/ws",m=this,s={},j={},o,l;this.Lang.augmentObject(j,this.getargs,true);j.guid=this.guid;j.command=k;if(this.ws){i=this.ws;}i=Q.augmentURI(i,j);n=n||{};this.Lang.augmentObject(s,this.postargs,true);this.Lang.augmentObject(s,n,true);for(q in s){if(s.hasOwnProperty(q)){p+=(p===""?"":"&")+q+"="+s[q];}}if(YAHOO.util.Connect){YAHOO.log("[YRegion2] executing action: "+i,"info");o={success:function(c){m.fire("region:executed",{type:"ajax",o:c,command:k,args:n});},failure:function(c){m.fire("region:error",{type:"ajax",o:c,command:k,args:n});}};if(this.Lang.isFunction(r)){o.success=function(c){r.apply(m,[c]);};}else{if(this.Lang.isObject(r)&&r){o=r;}}l=YAHOO.util.Connect.asyncRequest((p===""?"GET":"POST"),i,o,p);m.bubbling(h,"loading",{type:"ajax",node:m.node,handle:l,command:k,args:n});return l;}return null;},destroy:function(i){i=i||{};
this.fire("region:destroy",i);if(this.container){this.Event.purgeElement(this.container,true);if(!i.partial){this.container.parentNode.removeChild(this.container);}}if(this.childs){for(var j in this.childs){if(this.childs.hasOwnProperty(j)&&(!this.childs[j].lazyload)){this.destroy(i);}}}Q.destroyRegion(this);}};Q.notify=function(c,i,j){if(c&&G.hasOwnProperty(c)){return G[c].fire(i,j);}};Q.broadcast=function(i,c){if(X){return X.broadcast("broadcast",i,c);}};Q.setRegionDefinition=function(i,j){if(!F.hasOwnProperty(i)){F[i]=new B(i);}if(j){j.ns=i;F[i].set(j);}return this;};Q.isRegion=function(c){return F.hasOwnProperty(c);};Q.initRegion=function(i,c){P.push({method:"initRegion",args:[i,c]});return this;};Q.destroyRegion=function(c){YAHOO.log("[YRegion2] Destroying a region ("+c.guid+"): "+((c&&c.guid&&c.ns&&G.hasOwnProperty(c.guid)&&(c===G[c.guid]))?"sucess":"failure: someone is trying the remove a region (only the region itself can do this call)"),"warn");if(c&&c.guid&&c.ns&&G.hasOwnProperty(c.guid)&&(c===G[c.guid])){delete G[c.guid];}};Q.clearRegion=function(c){if(G.hasOwnProperty(c)){YAHOO.log("[YRegion2] removing the region manually: "+c,"warn");G[c].destroy({partial:true});}};Q.setPluginDefinition=function(c,i){if(!E.hasOwnProperty(c)){E[c]=i;}return this;};Q.isPlugin=function(c){return E.hasOwnProperty(c);};Q.initPlugin=function(c){P.push({method:"initPlugin",args:[c]});return this;};Q.getOwnerByClassName=function(j,i,k){var c;if(!j){return null;}if(!j.hasClass(i)){c=YAHOO.util.Dom.getAncestorByClassName(j.get(d),i);j=(c?new YAHOO.util.Element(c):null);}return j;};Q.getOwnerByTagName=function(k,i,l){i=i.toUpperCase();if(!k){return null;}var j,c=k.get("tagName");if(c.toUpperCase()!=i){j=YAHOO.util.Dom.getAncestorByTagName(k.get(d),i);k=(j?new YAHOO.util.Element(j):null);}return k;};Q.strictMode=true;Q.augmentURI=function(j,c){c=c||{};var l=g(j,this.strictMode),i="";l.queryKey=l.queryKey||{};YAHOO.lang.augmentObject(l.queryKey,c,true);if(l.protocol){i+=l.protocol+":";}if(this.strictMode){if(/^(?:[^:\/?#]+:)?\/\//.test(l.source)){i+="//";}}else{if(/^(?:(?![^:@]+:[^:@\/]*@)[^:\/?#.]+:)?\/\//.test(l.source)){i+="//";}}if(l.authority){if(l.userInfo){if(l.user){i+=l.user;}if(l.userInfo.indexOf(":")>-1){i+=":";}if(l.password){i+=l.password;}i+="@";}if(l.host){i+=l.host;}if(l.port){i+=":"+l.port;}}if(l.relative){if(l.path){if(l.directory){i+=l.directory;}if(l.file){i+=l.file;}}i+="?";for(var k in l.queryKey){if(l.queryKey.hasOwnProperty(k)){i+=k+"="+l.queryKey[k]+"&";}}if(l.anchor){i+="#"+l.anchor;}}return i;};Q.getHooks=function(i){var c;if(i){c=O(i.get("className"));}return c;};Q.getYUIButton=function(c){c=this.getOwnerByClassName(c,"yui-button");return((c&&YAHOO.widget.Button)?YAHOO.widget.Button.getButton(c.get("id")):null);};Q.inject=function(c){var j=document.getElementsByTagName("head")[0]||document.documentElement,i;c=c||{};if(c.css){i=document.createElement("style");i.type="text/css";if(i.styleSheet&&(typeof i.styleSheet==="object")){i.styleSheet.cssText=c.css;}else{i.appendChild(document.createTextNode(c.css));}j.appendChild(i);}if(c.js){i=document.createElement("script");c.js=c.js.replace(U,"");i.type="text/javascript";if(YAHOO.env.ua.ie){i.text=c.js;}else{i.appendChild(document.createTextNode(c.js));}j.insertBefore(i,j.firstChild);j.removeChild(i);}return this;};var f=window.YRegion2_config||{},T={ns:R,require:f.require||[],_debug:f._debug,_loader:f._loader,dependencies:f.dependencies,plugins:f.plugins,actions:{"region:ready":function(){var l,c,j;X=this;this.node.on("click",function(n){var p=C(n),i=O(p.classes),k=e(X,p.target);i.push("click");if(p.target&&k){k.bubbling("click",i,p);}});c=function(m){var n=M(m),k=e(X,n.target),i;if(n.target&&k){if((n.target.get(d)==k.node.get(d))&&(i=X.Event.getRelatedTarget(m))&&!X.Dom.isAncestor(k.container,i)){k.fire("region:"+m.type,n);}k.bubbling("mouse",m.type,n);}};this.node.on("mouseover",c);this.node.on("mouseout",c);j=function(i){X.broadcast("key",i.type,M(i));};this.Event.on(document,"keyup",j);this.Event.on(document,"keydown",j);this.Event.on(window,"resize",function(i){X.broadcast("window","resize",M(i));});Q.initRegion=Z;Q.initPlugin=Y;if(P.length>0){while((l=P.pop())){Q[l.method].apply(Q,l.args);}}if(f.actions&&this.Lang.isFunction(f.actions[W])){f.actions[W].apply(this,[]);}this.install((f.actions||{}));}},onAvailable:function(i){var c=this;YAHOO.log("[YRegion2] waiting for the document.body element");if(!document.body){c._handle=setInterval(function(){try{if(YAHOO.lang.isObject(document.body)){clearInterval(c._handle);i.apply(document.body,[]);}}catch(j){}},YAHOO.util.Event.POLL_INTERVAL);}else{i.apply(document.body,[]);}},args:{}};Z((f.guid?f.guid:R),T);return Q;}();YRegions=YRegion2;